# Java 虚拟机垃圾回收机制



#### **概述**

垃圾回收是一种自动的存储管理机制。 当一些被占用的内存不再需要时，就应该予以释放，以让出空间，这种存储资源管理，称为垃圾回收（Garbage Collection）。 垃圾回收器可以让程序员减轻许多负担，也减少程序员犯错的机会。



#### **JVM判断对象是否存活的算法**

GC 的存活标准知道哪些区域的内存需要被回收之后，我们自然而然地想到了，如何去判断一个对象需要被回收呢？对于如何判断对象是否可以回收，有两种比较经典的判断策略。

- 引用计数算法
- 可达性分析算法



#### **常用回收算法**

  标记-清除  ( mark-sweep )

```
优点：开销低，速度快
缺点： 原地清理所以无法避免碎片问题
```

  标记-复制  ( mark-copy )

```
优点：GC后的内存空间是连续的缺点： 可用内存空间减半
```

  标记-整理  ( mark-compact)

```
优点：无碎片问题，内存空间可用大小不减半
缺点：效率低，开销大
```

  引用-计数  (reference counting)

```
前三种垃圾回收算法都是间接式的，它们都需要从已知的根集合出发对存活对象图进行遍历，进而才能确定所有的存活对象。
在引用计数中，对象的存活性可以通过引用关系的创建或删除直接判定，从而无须像追踪式回收器那样先通过堆遍历找出所有的存活对象，然后再反向确定出未遍历的垃圾对象。

优点：直接遍历，速度快
缺点：无法解决环形引用问题
```



#### **分代回收**